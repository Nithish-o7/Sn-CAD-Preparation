<!DOCTYPE html>
<html lang="en">
<head>
<link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üöÄ</text></svg>">
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ServiceNow CAD Preparation</title>
<!-- Import Google Font -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">

<style>
/* --- DARK BLUE THEME & MODERN STYLES --- */
:root {
    /* Deep Navy Theme */
    --bg-gradient-start: #0f172a; /* Slate 900 */
    --bg-gradient-end: #1e293b;   /* Slate 800 */
    --card-bg: #1e293b;
    --card-hover: #334155;
    
    /* ServiceNow Brand Colors */
    --brand-green: #81B5A1;       /* The requested ServiceNow Green */
    --brand-green-hover: #5e8e7b;
    --brand-dark: #293E40;
    
    --text-primary: #f1f5f9;
    --text-secondary: #94a3b8;
    --border-color: #334155;
    
    /* Status Colors */
    --correct-bg: rgba(16, 185, 129, 0.2);
    --correct-border: #10b981;
    --wrong-bg: rgba(239, 68, 68, 0.2);
    --wrong-border: #ef4444;
    --bookmark-color: #f59e0b;
}

body {
    background: linear-gradient(135deg, var(--bg-gradient-start), var(--bg-gradient-end));
    color: var(--text-primary);
    font-family: 'Poppins', sans-serif;
    margin: 0;
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
    font-size: 16px;
}

.container {
    background-color: rgba(30, 41, 59, 0.95);
    backdrop-filter: blur(12px);
    padding: 45px;
    border-radius: 24px;
    width: 90%;
    max-width: 850px;
    text-align: center;
    box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
    border: 1px solid var(--border-color);
    margin: 30px 0;
    position: relative;
    overflow: hidden;
    z-index: 10;
}

/* HEADER STYLES */
h1 { 
    margin-bottom: 8px; 
    color: #ffffff; 
    font-size: 32px; 
    letter-spacing: -0.5px; 
    font-weight: 700;
}

h2.section-title { 
    color: var(--brand-green); 
    font-size: 20px; 
    margin: 35px 0 20px 0; 
    text-align: left; 
    border-bottom: 2px solid var(--border-color); 
    padding-bottom: 12px; 
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 1px;
}

.brand-green { color: var(--brand-green); } 

p.sub-head { color: var(--text-secondary); margin-bottom: 45px; font-size: 16px; font-weight: 300; }

.hidden { display: none !important; }

/* DASHBOARD LIST VIEW */
.list-view {
    display: grid;
    grid-template-columns: 1fr;
    gap: 18px;
    width: 100%;
}

@media (min-width: 768px) {
    .list-view { grid-template-columns: 1fr 1fr; }
    .list-item:last-child { grid-column: auto; } /* Removed span to keep grid consistent */
}

.list-item {
    background: var(--bg-gradient-start);
    padding: 20px 25px;
    border-radius: 16px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    transition: all 0.3s ease;
    border-left: 5px solid var(--brand-green); 
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
    border: 1px solid var(--border-color);
}

.list-item:hover { 
    transform: translateY(-4px); 
    background: var(--card-hover); 
    box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.2);
    border-color: var(--brand-green);
}

.list-info { text-align: left; }
.list-info h3 { margin: 0; font-size: 18px; color: #fff; font-weight: 600; }
.list-info p { margin: 4px 0 0 0; font-size: 13px; color: var(--text-secondary); }

.start-btn {
    padding: 8px 24px;
    background: linear-gradient(135deg, var(--brand-green), var(--brand-green-hover));
    color: #fff;
    border: none;
    border-radius: 20px;
    cursor: pointer;
    font-size: 14px;
    font-weight: 600;
    transition: transform 0.2s, box-shadow 0.2s;
    box-shadow: 0 4px 15px rgba(129, 181, 161, 0.2);
    text-shadow: 0 1px 2px rgba(0,0,0,0.2);
}

.start-btn:hover { 
    transform: scale(1.05); 
    box-shadow: 0 6px 20px rgba(129, 181, 161, 0.4);
}

/* QUIZ INTERFACE */
.quiz-header {
    background: #0f172a;
    padding: 15px 25px;
    border-radius: 16px;
    font-size: 15px;
    margin-bottom: 30px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-weight: 600;
    border: 1px solid var(--border-color);
    color: var(--brand-green);
}

/* Timer Badge */
.timer-badge {
    background: rgba(129, 181, 161, 0.1);
    padding: 5px 12px;
    border-radius: 12px;
    border: 1px solid var(--brand-green);
    display: flex;
    align-items: center;
    gap: 6px;
}

/* Icons */
.icon-btn {
    background: none;
    border: none;
    color: var(--text-secondary);
    cursor: pointer;
    font-size: 1.2rem;
    transition: color 0.2s;
    display: flex;
    align-items: center;
    padding: 5px;
    border-radius: 8px;
}
.icon-btn:hover { color: var(--brand-green); background: rgba(255,255,255,0.05); }

/* Visual Progress Bar */
.progress-container {
    width: 100%;
    height: 6px;
    background: #334155;
    border-radius: 10px;
    margin-bottom: 25px;
    overflow: hidden;
}
.progress-bar {
    height: 100%;
    background: var(--brand-green);
    width: 0%;
    transition: width 0.3s ease;
    box-shadow: 0 0 10px var(--brand-green);
}

.question-box { position: relative; }

.question-box h2 {
    font-size: 20px;
    margin-bottom: 30px;
    line-height: 1.6;
    text-align: left;
    font-weight: 500;
    color: #f1f5f9;
    padding-right: 40px; /* Space for bookmark */
}

.bookmark-toggle {
    position: absolute;
    top: 0;
    right: 0;
    font-size: 24px;
    color: var(--text-secondary);
    cursor: pointer;
    transition: transform 0.2s;
}
.bookmark-toggle:hover { transform: scale(1.1); }
.bookmark-toggle.bookmarked { color: var(--bookmark-color); }

.options-list { text-align: left; }

.option-item {
    background: #0f172a;
    padding: 18px 22px;
    margin-bottom: 15px;
    border-radius: 12px;
    cursor: pointer;
    transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
    border: 2px solid transparent;
    font-size: 16px;
    color: #cbd5e1;
    position: relative;
    box-shadow: 0 1px 3px rgba(0,0,0,0.12), 0 1px 2px rgba(0,0,0,0.24);
}

.option-item:hover { 
    background: #1e293b; 
    border-color: var(--brand-green);
    transform: translateY(-2px);
    box-shadow: 0 4px 8px rgba(0,0,0,0.2);
}

/* KEYBOARD SHORTCUT BADGE */
.key-hint {
    position: absolute;
    right: 15px;
    top: 50%;
    transform: translateY(-50%);
    font-size: 12px;
    color: var(--text-secondary);
    border: 1px solid var(--border-color);
    padding: 2px 6px;
    border-radius: 4px;
    opacity: 0.5;
}

/* STATES */
.option-item.selected {
    background-color: var(--brand-dark);
    border-color: var(--brand-green);
    color: white;
}

/* ELEVATION EFFECTS FOR ANSWERS */
.option-item.correct {
    background-color: var(--correct-bg) !important; 
    border-color: var(--correct-border) !important;
    color: #fff;
    transform: translateY(-4px) scale(1.01);
    box-shadow: 0 14px 28px rgba(46, 204, 113, 0.25), 0 10px 10px rgba(46, 204, 113, 0.22);
    font-weight: 500;
    z-index: 10;
}

.option-item.wrong {
    background-color: var(--wrong-bg) !important; 
    border-color: var(--wrong-border) !important;
    color: #fff;
    transform: translateY(-4px) scale(1.01);
    box-shadow: 0 14px 28px rgba(231, 76, 60, 0.25), 0 10px 10px rgba(231, 76, 60, 0.22);
    font-weight: 500;
    z-index: 10;
}

/* NAV BUTTONS */
.nav-buttons {
    display: flex;
    justify-content: space-between;
    margin-top: 40px;
}

.nav-btn {
    background-color: #334155;
    color: white;
    border: none;
    padding: 12px 30px;
    border-radius: 12px;
    cursor: pointer;
    transition: all 0.2s;
    font-size: 15px;
    font-weight: 600;
    font-family: 'Poppins', sans-serif;
}

.nav-btn:hover { background-color: #475569; transform: translateY(-1px); }

.nav-btn.primary { 
    background: var(--brand-green);
    color: #0f172a;
}
.nav-btn.primary:hover { 
    background: var(--brand-green-hover);
    color: white;
    box-shadow: 0 4px 12px rgba(129, 181, 161, 0.3);
}

.nav-btn:disabled { opacity: 0.5; cursor: not-allowed; transform: none; }

#submit-btn {
    background: var(--brand-green);
    color: #0f172a;
    font-weight: 700;
    display: none; 
    margin-top: 25px;
    width: 100%;
    padding: 16px;
    border: none;
    border-radius: 12px;
    cursor: pointer;
    font-size: 16px;
    transition: all 0.2s;
    box-shadow: 0 4px 15px rgba(129, 181, 161, 0.3);
}

#submit-btn:hover { 
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(129, 181, 161, 0.5);
}

.footer-link { 
    margin-top: 40px; 
    font-size: 14px; 
    border-top: 1px solid var(--border-color); 
    padding-top: 25px; 
    color: var(--text-secondary); 
}
.footer-link a { color: var(--brand-green); text-decoration: none; font-weight: 600; transition: color 0.2s; }
.footer-link a:hover { color: #fff; text-decoration: underline; }

/* Custom Checkbox Style */
input[type="checkbox"] { accent-color: var(--brand-green); transform: scale(1.3); margin-right: 10px; cursor: pointer; }

/* SEARCH BAR */
.search-container {
    margin-bottom: 20px;
    text-align: left;
}
.search-input {
    width: 100%;
    padding: 12px 15px;
    border-radius: 10px;
    border: 1px solid var(--border-color);
    background: #0f172a;
    color: white;
    font-family: 'Poppins', sans-serif;
    font-size: 15px;
    box-sizing: border-box;
}
.search-input:focus {
    outline: none;
    border-color: var(--brand-green);
    box-shadow: 0 0 0 2px rgba(129, 181, 161, 0.2);
}

/* STUDY MODE STYLES */
#study-view {
    max-height: 85vh;
    overflow-y: auto;
    text-align: left;
    padding-right: 10px;
}

/* Custom Scrollbar */
::-webkit-scrollbar { width: 8px; }
::-webkit-scrollbar-track { background: #0f172a; border-radius: 4px; }
::-webkit-scrollbar-thumb { background: #334155; border-radius: 4px; }
::-webkit-scrollbar-thumb:hover { background: #475569; }

.study-question-block {
    background: #0f172a;
    padding: 25px;
    border-radius: 16px;
    margin-bottom: 25px;
    border: 1px solid var(--border-color);
}

.study-question-title {
    color: var(--brand-green);
    margin-top: 0;
    margin-bottom: 18px;
    font-size: 17px;
    font-weight: 600;
}

.study-option {
    background: rgba(255,255,255,0.03);
    padding: 12px 18px;
    margin-bottom: 10px;
    border-radius: 8px;
    color: #ccc;
    font-size: 15px;
    border: 1px solid transparent;
}

.study-option.correct-answer {
    background-color: var(--correct-bg);
    border: 1px solid var(--correct-border);
    color: #10b981;
    font-weight: 600;
}

/* MODAL STYLES */
.modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.8);
    backdrop-filter: blur(5px);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 1000;
}
.modal-content {
    background: #1e293b;
    padding: 40px;
    border-radius: 20px;
    text-align: center;
    border: 1px solid var(--border-color);
    max-width: 400px;
    width: 90%;
    box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
}
.result-score { font-size: 48px; font-weight: 700; color: var(--brand-green); margin: 10px 0; }
.result-msg { color: var(--text-secondary); margin-bottom: 30px; }

/* QUESTION NAVIGATOR MODAL */
#nav-modal .modal-content { max-width: 600px; }
.nav-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(40px, 1fr));
    gap: 10px;
    margin-top: 20px;
    max-height: 400px;
    overflow-y: auto;
    padding-right: 5px;
}
.nav-item {
    width: 40px;
    height: 40px;
    border-radius: 8px;
    background: #334155;
    color: #fff;
    display: flex;
    justify-content: center;
    align-items: center;
    cursor: pointer;
    font-size: 14px;
    font-weight: 600;
    transition: all 0.2s;
    border: 2px solid transparent;
}
.nav-item:hover { background: #475569; }
.nav-item.current { border-color: #fff; box-shadow: 0 0 10px rgba(255,255,255,0.3); }
.nav-item.answered { background: #3b82f6; }
.nav-item.bookmarked { border-color: var(--bookmark-color); }
.nav-item.review-correct { background: var(--correct-border); }
.nav-item.review-wrong { background: var(--wrong-border); }

/* Confetti Canvas */
#confetti-canvas {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    z-index: 2000;
}

</style>
</head>
<body>

<canvas id="confetti-canvas"></canvas>

<!-- DASHBOARD VIEW -->
<div class="container" id="dashboard-view">
    <h1><span class="brand-green">ServiceNow</span> CAD Preparation</h1>
    <p class="sub-head">Select a module to begin your training</p>

    <!-- MOCK TESTS SECTION -->
    <h2 class="section-title">Mock Tests</h2>
    <div class="list-view">
        <div class="list-item">
            <div class="list-info">
                <h3>Mock Test 1</h3>
                <p>45 Questions</p>
            </div>
            <button class="start-btn" onclick="startQuiz('mock1')">Start</button>
        </div>

        <div class="list-item">
            <div class="list-info">
                <h3>Mock Test 2</h3>
                <p>45 Questions </p>
            </div>
            <button class="start-btn" onclick="startQuiz('mock2')">Start</button>
        </div>

        <div class="list-item">
            <div class="list-info">
                <h3>Mock Test 3</h3>
                <p>45 Questions </p>
            </div>
            <button class="start-btn" onclick="startQuiz('mock3')">Start</button>
        </div>

        <div class="list-item" style="border-left-color: #fff;">
            <div class="list-info">
                <h3 style="color:#ffffff;">Study All Mock Tests</h3>
                <p>Questions from Test 1, 2 & 3</p>
            </div>
            <button class="start-btn" style="background: #334155; box-shadow:none; color:#ccc;" onclick="startMockStudyMode()">View</button>
        </div>
    </div>

    <!-- OTHER RESOURCES SECTION -->
    <h2 class="section-title">Other Resources</h2>
    <div class="list-view">
        <div class="list-item">
            <div class="list-info">
                <h3>Other MCQs</h3>
                <p>25 Questions</p>
            </div>
            <button class="start-btn" onclick="startQuiz('other')">Start</button>
        </div>
        
        <div class="list-item">
            <div class="list-info">
                <h3>Udemy Dumps</h3>
                <p>17 Questions</p>
            </div>
            <button class="start-btn" onclick="startQuiz('udemy')">Start</button>
        </div>

        <div class="list-item" style="border-left-color: #fff; grid-column: 1 / -1;">
            <div class="list-info">
                <h3 style="color:#ffffff;">Study Other Resources</h3>
                <p>View Other MCQs & Udemy Dumps</p>
            </div>
            <button class="start-btn" style="background: #334155; box-shadow:none; color:#ccc;" onclick="startOtherStudyMode()">View</button>
        </div>
    </div>

    <div class="footer-link">
        <label style="cursor:pointer; display:flex; align-items:center; justify-content:center;">
            <input type="checkbox" id="jumble-check" checked> Randomize Answer Order
        </label>
        <p style="font-size: 0.9em; color: var(--text-secondary); margin-top: 20px; line-height: 1.6; opacity: 0.7;">
            If you find any wrong answers or errors, kindly acknowledge me with proper ServiceNow documentation.
        </p>
    </div>
</div>

<!-- QUIZ VIEW -->
<div class="container hidden" id="quiz-view">
    <div class="progress-container">
        <div class="progress-bar" id="progress-bar"></div>
    </div>
    
    <div class="quiz-header">
        <div style="display:flex; align-items:center; gap:10px;">
            <button class="icon-btn" onclick="openNavModal()" title="Question Navigator">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="7" height="7"></rect><rect x="14" y="3" width="7" height="7"></rect><rect x="14" y="14" width="7" height="7"></rect><rect x="3" y="14" width="7" height="7"></rect></svg>
            </button>
            <span id="q-progress">Q 1/10</span>
        </div>
        
        <div class="timer-badge">
            <span>‚è±Ô∏è</span> <span id="timer-display">00:00</span>
        </div>
        <span id="score-display">Score: 0 / 0</span>
    </div>

    <div class="question-box">
        <div class="bookmark-toggle" id="bookmark-btn" onclick="toggleBookmark()" title="Bookmark Question">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"></path></svg>
        </div>
        <h2 id="question-text">Loading...</h2>
        <div class="options-list" id="options-container"></div>
        <button id="submit-btn" onclick="submitMultiAnswer()">Submit Answer</button>
    </div>

    <div class="nav-buttons">
        <button class="nav-btn prev" onclick="prevQuestion()">Previous</button>
        <button class="nav-btn primary next" onclick="nextQuestion()">Next</button>
    </div>

    <div class="footer-link">
        <a href="#" onclick="location.reload()">‚¨Ö Exit to Dashboard</a>
        <div style="margin-top:10px; font-size:12px; opacity:0.6;">
            Tips: Use <strong>1-4</strong> to select, <strong>Enter</strong> to submit, <strong>Arrows</strong> to navigate.
        </div>
    </div>
</div>

<!-- NAVIGATOR MODAL -->
<div id="nav-modal" class="modal-overlay hidden" onclick="if(event.target === this) closeNavModal()">
    <div class="modal-content">
        <h3 style="color:var(--brand-green); margin-top:0;">Question Navigator</h3>
        <p style="font-size:12px; color:#aaa; margin-bottom:15px;">Blue: Answered | Orange Border: Bookmarked</p>
        <div class="nav-grid" id="nav-grid-content"></div>
        <button class="nav-btn" style="margin-top:20px;" onclick="closeNavModal()">Close</button>
    </div>
</div>

<!-- RESULTS MODAL -->
<div id="results-modal" class="modal-overlay hidden">
    <div class="modal-content">
        <h2>Quiz Completed!</h2>
        <div class="result-score" id="final-score">0%</div>
        <p class="result-msg" id="final-msg">Good effort!</p>
        <div style="display:flex; flex-direction:column; gap:10px;">
            <button class="nav-btn primary" onclick="closeResultsModal()">Review Answers</button>
            <button class="nav-btn" id="retake-incorrect-btn" onclick="startRetakeIncorrect()">Retake Incorrect</button>
            <button class="nav-btn" onclick="location.reload()">Back to Dashboard</button>
        </div>
    </div>
</div>

<!-- STUDY VIEW -->
<div class="container hidden" id="study-view">
    <div class="quiz-header">
        <span>Study Mode</span>
        <button class="nav-btn" style="padding: 5px 15px; font-size: 14px;" onclick="location.reload()">Close</button>
    </div>
    
    <div class="search-container">
        <input type="text" id="study-search" class="search-input" placeholder="Search questions..." onkeyup="filterStudyQuestions()">
    </div>

    <div id="study-content">
        <!-- Questions injected here -->
    </div>
    <div class="footer-link">
        <a href="#" onclick="location.reload()">‚¨Ö Exit to Dashboard</a>
    </div>
</div>

<script>
// ================= DATA SECTION =================

// MOCK TEST DATA
const mock1Data = [
{"numb": 1, "question": "ServiceNow recommends keeping ______ separate to ensure stability and security.", "options": ["Development and Production Environments", "System Logs and User Data", "Incident Management and Problem Management", "On\u2011premise and Cloud Solutions"], "answer": "Development and Production Environments"},
{"numb": 2, "question": "The CMDB in ServiceNow is used to track and manage IT assets and configuration items.", "options": ["True", "False"], "answer": "True"},
{"numb": 3, "question": "Import Sets in ServiceNow can use ______ to transform data as it is imported.", "options": ["Transform Maps", "Workflow Scripts", "Business Rules", "UI Policies"], "answer": "Transform Maps"},
{"numb": 4, "question": "ServiceNow themes cannot be applied to individual applications, only to the entire instance.", "options": ["True", "False"], "answer": "False"},
{"numb": 5, "question": "What is the primary purpose of UI Builder in ServiceNow?", "options": ["To manage server-side logic", "To design and customize user interfaces", "To configure user roles and permissions", "To generate reports and analytics"], "answer": "To design and customize user interfaces"},
{"numb": 6, "question": "UI Builder provides a ______ interface for designing and customizing user interfaces in ServiceNow.", "options": ["Drag-and-drop", "Text-based", "Command-line", "Script-driven"], "answer": "Drag-and-drop"},
{"numb": 7, "question": "What is ServiceNow primarily used for?", "options": ["Video Editing", "Cloud Storage", "IT Service Management", "Graphic Design"], "answer": "IT Service Management"},
{"numb": 8, "question": "Which feature in ServiceNow helps automate workflows and processes?", "options": ["Service Portal", "Knowledge Management", "Flow Designer", "Reporting"], "answer": "Flow Designer"},
{"numb": 9, "question": "Which of the following are features of REST integration in ServiceNow?", "options": ["Stateless communication", "XML-based messaging", "CRUD operations", "Strong typing"], "answer": "CRUD operations"},
{"numb": 10, "question": "What is the first step in creating a custom user interface in UI Builder?", "options": ["Adding data sources", "Selecting a template", "Defining user roles", "Configuring event handlers"], "answer": "Selecting a template"},
{"numb": 11, "question": "The structure of ServiceNow instances includes Development, ______, and Production environments.", "options": ["Test", "Training", "Sandbox", "Demo"], "answer": "Test"},
{"numb": 12, "question": "Which of the following are advanced features of UI Builder?", "options": ["Custom theming", "Multi-page navigation", "Role-based access control", "Scheduled reporting"], "answer": "Custom theming"},
{"numb": 13, "question": "Which protocol is commonly used for REST integrations in ServiceNow?", "options": ["HTTP", "FTP", "SMTP", "SNMP"], "answer": "HTTP"},
{"numb": 14, "question": "In ServiceNow, the ______ environment should be the first place where new customizations and configurations are implemented.", "options": ["Development", "Production", "Test", "Staging"], "answer": "Development"},
{"numb": 15, "question": "______ integrations in ServiceNow use web services to allow applications to communicate over the internet.", "options": ["REST", "FTP", "SMTP", "SNMP"], "answer": "REST"},
{"numb": 16, "question": "Which of the following is NOT a pre-built component in UI Builder?", "options": ["Table", "Chart", "Script Editor", "Form"], "answer": "Script Editor"},
{"numb": 17, "question": "Portal pages in ServiceNow cannot be modified once they are published.", "options": ["True", "False"], "answer": "False"},
{"numb": 18, "question": "You cannot use custom code or scripting within UI Builder; it only supports pre-built components.", "options": ["True", "False"], "answer": "False"},
{"numb": 19, "question": "The ______ environment is used for day-to-day business operations.", "options": ["Production", "Development", "Testing", "Staging"], "answer": "Production"},
{"numb": 20, "question": "The ______ in ServiceNow is a framework for organizing configuration items (CIs) and their relationships.", "options": ["Configuration Management Database (CMDB)", "Incident Management System (IMS)", "Change Management Process (CMP)", "Knowledge Base (KB)"], "answer": "Configuration Management Database (CMDB)"},
{"numb": 21, "question": "Which components can be used to display data in UI Builder?", "options": ["Data visualization", "Text input", "Table", "Button"], "answer": ["Data visualization", "Table"]},
{"numb": 22, "question": "The ______ environment is used to build and test new features.", "options": ["Development", "Production", "Staging", "Training"], "answer": "Development"},
{"numb": 23, "question": "Advanced UI Builder features include ______ and ______, which allow for more tailored and complex interfaces.", "options": ["Conditional rendering and custom components", "Basic templates and custom components", "Static layouts and custom components", "Predefined themes and custom components"], "answer": "Conditional rendering and custom components"},
{"numb": 24, "question": "What is the primary purpose of the Configuration Management Database (CMDB) in ServiceNow?", "options": ["To manage configuration items (CIs)", "To store user credentials", "To schedule imports", "To create UI policies"], "answer": "To manage configuration items (CIs)"},
{"numb": 25, "question": "To display service catalog items on a portal page, you need to use ______.", "options": ["Service Catalog Widgets", "Data Sources", "User Roles", "Script Includes"], "answer": "Service Catalog Widgets"},
{"numb": 26, "question": "Which of the following is NOT a standard integration method in ServiceNow?", "options": ["REST", "SOAP", "FTP", "Email"], "answer": "FTP"},
{"numb": 27, "question": "Which environments are used for testing changes in ServiceNow? (Choose two)", "options": ["Production", "Development", "Test", "Sandbox"], "answer": ["Development", "Test"]},
{"numb": 28, "question": "To manage user access and permissions on a portal, you would use the ______ settings.", "options": ["Portal Configuration", "Customization settings", "Performance settings", "Design settings"], "answer": "Portal Configuration"},
{"numb": 29, "question": "The ______ provides a centralized place for users to request IT services and resources in ServiceNow.", "options": ["Service Catalog", "Incident Management", "Change Request", "Knowledge Base"], "answer": "Service Catalog"},
{"numb": 30, "question": "A ______ in ServiceNow is used to run server-side code at specified times or intervals.", "options": ["Scheduled Job", "UI Action", "Business Rule", "Client Script"], "answer": "Scheduled Job"},
{"numb": 31, "question": "Which environment is used for daily business activities?", "options": ["Production", "Sandbox", "Test", "Development"], "answer": "Production"},
{"numb": 32, "question": "Which of the following are types of tables in ServiceNow? (Select Two)", "options": ["Task Table", "Dictionary Table", "Incident Table", "System Table"], "answer": ["Task Table", "Dictionary Table"]},
{"numb": 33, "question": "What is an Import Set used for in ServiceNow?", "options": ["To create user interfaces", "To import data from external sources", "To manage server configurations", "To schedule tasks"], "answer": "To import data from external sources"},
{"numb": 34, "question": "What can you manage with the Common Service Data Model (CSDM) in ServiceNow?", "options": ["Business applications", "Service portfolios", "User permissions", "Technical services"], "answer": "Business applications"},
{"numb": 35, "question": "What are the benefits of using Import Sets in ServiceNow?", "options": ["Automates data import processes", "Supports data transformation", "Requires manual data entry", "Ensures data consistency"], "answer": ["Automates data import processes", "Supports data transformation", "Ensures data consistency"]},
{"numb": 36, "question": "Which of the following are components of ServiceNow instance architecture? (Select Two)", "options": ["Application Server", "Database Server", "Web Browser", "Mobile Device"], "answer": ["Application Server", "Database Server", "Web Browser"]},
{"numb": 37, "question": "The production instance is used for experimenting with new features.", "options": ["True", "False"], "answer": "False"},
{"numb": 38, "question": "The test instance is used to implement final changes directly into production.", "options": ["True", "False"], "answer": "False"},
{"numb": 39, "question": "In UI Builder, a ______ component is used to arrange other components within a layout.", "options": ["Container", "Data", "Button", "Icon"], "answer": "Container"},
{"numb": 40, "question": "SOAP integrations in ServiceNow typically use JSON format for message exchange.", "options": ["True", "False"], "answer": "False"},
{"numb": 41, "question": "Which ServiceNow tool is used for creating custom applications without coding?", "options": ["App Engine Studio", "Flow Designer", "Report Designer", "Virtual Agent"], "answer": "App Engine Studio"},
{"numb": 42, "question": "Which component is essential for laying out other components in UI Builder?", "options": ["Button", "Data visualization", "Text input", "Container"], "answer": "Container"},
{"numb": 43, "question": "Which of the following are steps to create a new widget in ServiceNow? (Select all that apply)", "options": ["Navigate to the Widget Editor", "Select 'Create New Widget'", "Configure the widget properties", "Publish the widget to the Service Catalog"], "answer": ["Navigate to the Widget Editor", "Select 'Create New Widget'", "Configure the widget properties"]},
{"numb": 44, "question": "Which of the following are benefits of using UI Builder in ServiceNow?", "options": ["Drag-and-drop interface", "Custom scripting capabilities", "Integration with external data sources", "Automated incident management"], "answer": ["Drag-and-drop interface", "Integration with external data sources"]},
{"numb": 45, "question": "UI Builder in ServiceNow allows for real-time data updates on the user interface?", "options": ["True", "False"], "answer": "True"}
];

const mock2Data = [
{"numb": 1, "question": "JavaScript variables must be declared with the keyword 'var'.", "options": ["True", "False"], "answer": "False"},
{"numb": 2, "question": "What is ServiceNow primarily used for?", "options": ["Graphic design", "Social media management", "IT service management", "E-commerce"], "answer": "IT service management"},
{"numb": 3, "question": "In ServiceNow, a record is stored in a ________.", "options": ["Folder", "Spreadsheet", "Table", "Document"], "answer": "Table"},
{"numb": 4, "question": "In what phase of application development is App Engine Studio most useful?", "options": ["Design and development", "Deployment", "Maintenance", "Testing"], "answer": "Design and development"},
{"numb": 5, "question": "What are benefits of using application scopes in ServiceNow? (Select Two)", "options": ["Enhancing security", "Isolating application data", "Sharing data across all applications", "Reducing server load"], "answer": ["Enhancing security", "Isolating application data"]},
{"numb": 6, "question": "Workflows in ServiceNow automate processes and can be designed using the Workflow Editor.", "options": ["True", "False"], "answer": "True"},
{"numb": 7, "question": "Which table in ServiceNow is used to store incident records?", "options": ["incident_record", "incident", "incident_table", "incident_log"], "answer": "incident"},
{"numb": 8, "question": "Which statements are true about UI policies and data policies?", "options": ["Used for scripting server-side interactions", "Execute on the client-side", "Enforce data consistency rules and standards", "Control form field behavior based on field values"], "answer": ["Execute on the client-side", "Control form field behavior based on field values", "Enforce data consistency rules and standards"]},
{"numb": 9, "question": "The Incident Management module in ServiceNow is used to handle ________.", "options": ["Incidents", "Employee payroll", "Financial transactions", "Product inventory management"], "answer": "Incidents"},
{"numb": 10, "question": "What are typical stages in the lifecycle of an application? (Select all that apply)", "options": ["Testing", "Customer support", "Planning", "Deployment"], "answer": ["Testing", "Planning", "Deployment"]},
{"numb": 11, "question": "____ in ServiceNow allow administrators to control access to tables, fields, and other application elements based on user roles.", "options": ["Workflow Activities", "Data Transformation Rules", "UI Policies", "Access Control Rules"], "answer": "Access Control Rules"},
{"numb": 12, "question": "What are the main scripting languages used in ServiceNow?", "options": ["JavaScript & Jelly", "Ruby & Perl", "Java and Python", "C# & PHP"], "answer": "JavaScript & Jelly"},
{"numb": 13, "question": "Why is scripting important in ServiceNow development?", "options": ["It simplifies user authentication", "It allows customization beyond out-of-the-box features", "It integrates with external databases", "It improves system performance"], "answer": "It allows customization beyond out-of-the-box features"},
{"numb": 14, "question": "ServiceNow ITSM includes modules for managing incidents and changes.", "options": ["True", "False"], "answer": "True"},
{"numb": 15, "question": "What can you use 'Page Structures' for in ServiceNow?", "options": ["To set user permissions", "To design server hardware", "To organize the layout of portal pages", "To create data tables"], "answer": "To organize the layout of portal pages"},
{"numb": 16, "question": "Which of the following can be created in the Incident Management module", "options": ["Financial reports", "Service requests", "User accounts", "Incident tickets"], "answer": ["Service requests", "Incident tickets"]},
{"numb": 17, "question": "Which of the following are features of the Change Management module in ServiceNow?", "options": ["Knowledge Base", "Change Request", "Change Calendar", "Risk Assessment"], "answer": ["Change Request", "Change Calendar", "Risk Assessment"]},
{"numb": 18, "question": "Debugging server-side scripts in ServiceNow often involves reviewing __________ output for errors.", "options": ["Client Scripts", "System Logs", "UI Policies", "Data Import Sets"], "answer": "System Logs"},
{"numb": 19, "question": "Which components can you customize in a ServiceNow widget?", "options": ["Widget layout", "Widget data source", "Widget color scheme", "Widget title"], "answer": ["Widget layout", "Widget color scheme", "Widget title", "Widget data source"]},
{"numb": 20, "question": "Client scripts in ServiceNow improve __________ by enabling __________ interactions.", "options": ["Reporting accuracy, Delayed", "Data security, Static", "System performance, Manual", "User experience, Dynamic"], "answer": "User experience, Dynamic"},
{"numb": 21, "question": "What is the primary purpose of the Incident Management module in ServiceNow?", "options": ["To manage software licenses", "To manage service requests", "To manage and resolve incidents", "To manage employee performance"], "answer": "To manage and resolve incidents"},
{"numb": 22, "question": "ServiceNow ITSM can only be used for IT-related services.", "options": ["True", "False"], "answer": "False"},
{"numb": 23, "question": "Which environment is App Engine Studio typically used in ServiceNow?", "options": ["Production", "Development", "Test", "Sandbox"], "answer": "Development"},
{"numb": 24, "question": "What can you use the 'Preview' feature for in the Widget Editor? (Select all that apply)", "options": ["To view changes made to the widget in real-time", "To test the widget functionality", "To access widget settings", "To publish the widget directly"], "answer": ["To view changes made to the widget in real-time", "To test the widget functionality"]},
{"numb": 25, "question": "UI policies in ServiceNow are used to control the behavior of form fields", "options": ["True", "False"], "answer": "True"},
{"numb": 26, "question": "When you create a new flow in Flow Designer, you must first define the __________ that will start the flow", "options": ["Action", "Script", "Condition", "Trigger"], "answer": "Trigger"},
{"numb": 27, "question": "The ____ in ServiceNow allows developers to customize the platform to meet specific business needs", "options": ["Service Portal", "Workflow Designer", "Incident Management", "Application Designer or Studio"], "answer": "Application Designer or Studio"},
{"numb": 28, "question": "A __________ in Flow Designer represents a set of related actions that can be executed together.", "options": ["Subflow", "Trigger", "Condition", "Task"], "answer": "Subflow"},
{"numb": 29, "question": "_____ are used in ServiceNow to enforce data consistency and integrity by defining rules that run when records are inserted, updated, or deleted.", "options": ["Client Scripts", "UI Policies", "Data Dictionaries", "Business Rules"], "answer": "Business Rules"},
{"numb": 30, "question": "What is Scripting in ServiceNow primarily used for?", "options": ["Generating reports", "All of the above", "Automating processes and workflows", "Managing user interfaces"], "answer": "Automating processes and workflows"},
{"numb": 31, "question": "What is App Engine Studio used for in ServiceNow?", "options": ["Generating reports", "Managing user accounts", "Creating virtual machines", "Designing applications visually"], "answer": "Designing applications visually"},
{"numb": 32, "question": "What is a 'Widget' in ServiceNow?", "options": ["A database schema", "A component used to display content or functionality on a portal page", "A type of user role", "A tool for managing user accounts"], "answer": "A component used to display content or functionality on a portal page"},
{"numb": 33, "question": "The ________ module in ServiceNow helps in managing changes to IT services.", "options": ["Problem Management", "Knowledge Management", "Incident Management", "Change Management"], "answer": "Change Management"},
{"numb": 34, "question": "Which of the following modules is NOT a part of ServiceNow ITSM?", "options": ["Incident Management", "Problem Management", "Change Management", "Customer Relationship Management"], "answer": "Customer Relationship Management"},
{"numb": 35, "question": "What is GlideSystem in ServiceNow?", "options": ["A user interface framework", "An API for server-side operations", "A reporting tool", "A scripting language"], "answer": "An API for server-side operations"},
{"numb": 36, "question": "What is a client script in ServiceNow?", "options": ["A script that modifies database records", "A script that creates new tables", "A script that runs on the client machine", "A script that runs on the server machine"], "answer": "A script that runs on the client machine"},
{"numb": 37, "question": "What is the primary purpose of creating an application in ServiceNow?", "options": ["To update server software", "To manage incidents and requests", "To customize user profiles", "To schedule meetings"], "answer": "To manage incidents and requests"},
{"numb": 38, "question": "What is a 'Page Layout' in ServiceNow?", "options": ["A template for workflow processes", "The arrangement of content on a page", "A method for defining data access levels", "A way to configure system notifications"], "answer": "The arrangement of content on a page"},
{"numb": 39, "question": "What is the purpose of a 'Theme' in ServiceNow?", "options": ["To manage workflow processes", "To customize the appearance of portal pages", "To create user roles", "To define how data is stored"], "answer": "To customize the appearance of portal pages"},
{"numb": 40, "question": "To create a flow that runs on a schedule, you use the ________ trigger.", "options": ["Manual trigger", "Event-based trigger", "Approval trigger", "Scheduled trigger"], "answer": "Scheduled trigger"},
{"numb": 41, "question": "How do scripts interact with ServiceNow data?", "options": ["Via direct database connections", "By accessing Glide APIs", "Through SQL queries", "Using RESTful APIs"], "answer": "By accessing Glide APIs"},
{"numb": 42, "question": "What are the primary benefits of using ServiceNow ITSM? (Select all that apply)", "options": ["Improved service availability", "Enhanced customer satisfaction", "Better compliance", "Increased operational costs"], "answer": ["Improved service availability", "Enhanced customer satisfaction", "Better compliance"]},
{"numb": 43, "question": "Business Rules in ServiceNow are used to define automated actions based on conditions and can only be executed on server-side events.", "options": ["True", "False"], "answer": "True"},
{"numb": 44, "question": "Which tasks are involved in creating an application in ServiceNow? (Select Two)", "options": ["Configuring business rules", "Writing server code", "Designing user interface", "Sending emails to users"], "answer": ["Designing user interface", "Configuring business rules"]},
{"numb": 45, "question": "Scripting enhances ServiceNow functionalities by enabling __________ and __________.", "options": ["Automation, Hardware improvements", "Automation, Data storage", "Automation, Aesthetic designs", "Automation, Customisation"], "answer": "Automation, Customisation"}
];

const mock3Data = [
{"numb": 1, "question": "Actions in ServiceNow Flow Designer execute specific ______ within the flow.", "options": ["Databases", "Plugins", "Schedules", "Tasks"], "answer": "Tasks"},
{"numb": 2, "question": "Actions cannot be reused in different subflows.", "options": ["TRUE", "FALSE"], "answer": "FALSE"},
{"numb": 3, "question": "What is a Subflow in ServiceNow?", "options": ["A module for creating reports", "A type of user role", "A visual element on the dashboard", "A workflow step that can be reused"], "answer": "A workflow step that can be reused"},
{"numb": 4, "question": "In the context of ServiceNow application development, what does the term 'Application Data Model' refer to?", "options": ["The layout and design of user interfaces", "The process of creating and managing UI Policies", "The structure and relationships of tables and fields", "The workflow design for handling business processes"], "answer": "The structure and relationships of tables and fields"},
{"numb": 5, "question": "Which of the following is NOT a client-side script type in ServiceNow?", "options": ["Client Script", "UI Policy", "Business Rule", "UI Action"], "answer": "Business Rule"},
{"numb": 6, "question": "Which of the following is NOT a key component of a flow in Flow Designer?", "options": ["Action", "Trigger", "Condition", "User Interface"], "answer": "User Interface"},
{"numb": 7, "question": "______ are a debugging tool in ServiceNow that help in tracking and fixing issues in server-side scripts.", "options": ["Workflow Editors", "Script Debuggers", "UI Policies", "Client Scripts"], "answer": "Script Debuggers"},
{"numb": 8, "question": "What is the purpose of creating an Action in ServiceNow?", "options": ["To automate specific tasks or steps within a flow", "To design user interfaces", "To manage user roles", "To configure email notifications"], "answer": "To automate specific tasks or steps within a flow"},
{"numb": 9, "question": "Actions in Flow Designer are used to define the conditions under which a flow will execute.", "options": ["TRUE", "FALSE"], "answer": "FALSE"},
{"numb": 10, "question": "Which of the following can be used to automate a task when a record is inserted or updated?", "options": ["UI Action", "UI Policy", "Client Script", "Business Rule"], "answer": "Business Rule"},
{"numb": 11, "question": "The ______ defines the structure and relationships of tables and fields in an application.", "options": ["Script Include", "User interface", "Business Rule", "Data model"], "answer": "Data model"},
{"numb": 12, "question": "To automate repetitive tasks in ServiceNow, you can use ______ to trigger flows based on predefined conditions.", "options": ["Data Policies", "Scheduled Jobs", "UI Policies", "Flow Designer"], "answer": "Flow Designer"},
{"numb": 13, "question": "Which of the following are valid types of Client Scripts? (Select all that apply)", "options": ["onChange", "onLoad", "onClick", "onSubmit"], "answer": ["onChange", "onLoad", "onSubmit"]},
{"numb": 14, "question": "You can create reusable flow components in Flow Designer to streamline workflow development.", "options": ["FALSE", "TRUE"], "answer": "TRUE"},
{"numb": 15, "question": "Which of the following are types of client-side scripting in ServiceNow? (Select all that apply)", "options": ["UI Policy", "Business Rule", "Client Script", "Script Include"], "answer": ["UI Policy", "Client Script"]},
{"numb": 16, "question": "What is a primary benefit of using Subflows in ServiceNow?", "options": ["Increased manual processing", "Reusable components and reduced redundancy", "Complex setup requirements", "Manual tracking of changes"], "answer": "Reusable components and reduced redundancy"},
{"numb": 17, "question": "What are common uses for Script Includes in ServiceNow? (Select all that apply)", "options": ["Storing reusable server-side code", "Performing server-side calculations", "Managing client-side UI elements", "Scheduling regular tasks"], "answer": ["Storing reusable server-side code", "Performing server-side calculations"]},
{"numb": 18, "question": "Which feature allows you to define the starting point of a flow in Flow Designer?", "options": ["Script", "Action", "Condition", "Trigger"], "answer": "Trigger"},
{"numb": 19, "question": "A ______ in ServiceNow is used to run server-side code at specified times or intervals.", "options": ["UI Action", "Client Script", "Scheduled Job", "Business Rule"], "answer": "Scheduled Job"},
{"numb": 20, "question": "What are the components of an action step in ServiceNow?", "options": ["Data Transformation", "Script", "Notification Settings", "Conditions"], "answer": "Script"},
{"numb": 21, "question": "What can a Scheduled Job in ServiceNow be used for?", "options": ["To update UI policies", "To configure UI actions", "To run server-side scripts at specified times", "To create new user roles"], "answer": "To run server-side scripts at specified times"},
{"numb": 22, "question": "Advanced Flow Designer concepts include the use of conditions and loops to handle complex scenarios.", "options": ["FALSE", "TRUE"], "answer": "TRUE"},
{"numb": 23, "question": "______ Scripts are used to execute JavaScript code on the client side to manage form behavior and interactions.", "options": ["UI Policy", "Business", "Client", "Script Include"], "answer": "Client"},
{"numb": 24, "question": "Client Scripts are used to execute scripts on the ______ side.", "options": ["Server", "Database", "Client", "Middleware"], "answer": "Client"},
{"numb": 25, "question": "UI Policies allow you to dynamically change the behavior of form fields based on ______", "options": ["Conditions", "User roles", "Colors", "Field size"], "answer": "Conditions"},
{"numb": 26, "question": "Can a Subflow be used multiple times within different Flows?", "options": ["Yes, but only in the same Flow.", "No, each Subflow can only be used once", "No, Subflows are specific to one Flow only", "Yes, a Subflow can be reused in multiple Flows."], "answer": "Yes, a Subflow can be reused in multiple Flows."},
{"numb": 27, "question": "What can you include in a custom action to make it functional? (Select all that apply)", "options": ["External API Calls", "Script Logic", "Flow Variables", "Business Rules"], "answer": ["Script Logic", "External API Calls", "Flow Variables"]},
{"numb": 28, "question": "How can you test a flow you have designed in ServiceNow?", "options": ["By manually triggering it", "Through the service portal", "Using the Flow Designer test feature", "By publishing it directly"], "answer": "Using the Flow Designer test feature"},
{"numb": 29, "question": "What is the primary purpose of a Script Include in ServiceNow?", "options": ["To handle client-side validations", "To configure UI actions", "To execute server-side reusable code", "To manage user roles"], "answer": "To execute server-side reusable code"},
{"numb": 30, "question": "Business Rules are used to execute logic on the client side before a record is saved.", "options": ["TRUE", "FALSE"], "answer": "FALSE"},
{"numb": 31, "question": "What is Flow Designer used for in ServiceNow", "options": ["Managing databases", "Creating user interfaces", "Automating processes", "Generating reports"], "answer": "Automating processes"},
{"numb": 32, "question": "Which of the following are components of the Application Data Model in ServiceNow? (Select all that apply)", "options": ["Workflows", "Forms", "Fields", "Tables"], "answer": ["Fields", "Tables"]},
{"numb": 33, "question": "Which of the following are types of triggers in ServiceNow Flow Designer? (Select all that apply)", "options": ["Record-based", "Event-based", "User-based", "Schedule-based"], "answer": ["Record-based", "Schedule-based", "Event-based"]},
{"numb": 34, "question": "Which of the following is used to execute scripts on the client side in ServiceNow?", "options": ["Client Scripts", "Business Rules", "UI Actions", "Scheduled Jobs"], "answer": "Client Scripts"},
{"numb": 35, "question": "A trigger in ServiceNow Flow Designer is a predefined ______ that starts a flow.", "options": ["Action", "When it is met", "Event", "Variable"], "answer": "Event"},
{"numb": 36, "question": "What are common use cases for designing flows in ServiceNow? (Select all that apply)", "options": ["Managing network infrastructure", "Building web pages", "Automating HR processes", "IT service management"], "answer": ["Automating HR processes", "IT service management"]},
{"numb": 37, "question": "Which script type runs on the client side in ServiceNow?", "options": ["Script Include", "Business Rule", "Client Script", "Scheduled Job"], "answer": "Client Script"},
{"numb": 38, "question": "UI Policies can be used to control the visibility of fields based on user roles.", "options": ["TRUE", "FALSE"], "answer": "FALSE"},
{"numb": 39, "question": "What benefits do reusable actions and subflows offer in ServiceNow? (Select all that apply)", "options": ["Easier Maintenance", "Consistent Functionality", "Increased Complexity", "Reduced Development Time"], "answer": ["Easier Maintenance", "Consistent Functionality", "Reduced Development Time"]},
{"numb": 40, "question": "What can you typically do when debugging and troubleshooting scripts in ServiceNow? (Select all that apply)", "options": ["Use browser developer tools", "Use the Script Debugger", "Add logging statements", "Modify server hardware"], "answer": ["Use the Script Debugger", "Add logging statements", "Use browser developer tools"]},
{"numb": 41, "question": "Which of the following actions can be defined using UI Actions? (Select all that apply)", "options": ["Buttons", "Form Field Visibility", "Links", "Context Menu Items"], "answer": ["Buttons", "Links", "Context Menu Items"]},
{"numb": 42, "question": "Scheduled Jobs are used to run scripts on the client side at specified times.", "options": ["FALSE", "TRUE"], "answer": "FALSE"},
{"numb": 43, "question": "UI Policies are used to control the behavior of fields on a form in ServiceNow.", "options": ["TRUE", "FALSE"], "answer": "TRUE"},
{"numb": 44, "question": "What is the primary purpose of UI Policies in ServiceNow?", "options": ["To control the visibility and behavior of form fields based on conditions", "To automate tasks based on scheduled triggers", "To manage business logic on the server side", "To define data relationships and tables"], "answer": "To control the visibility and behavior of form fields based on conditions"},
{"numb": 45, "question": "Which type of actions can be included in a flow in Flow Designer?", "options": ["Script actions", "Record updates", "Email notifications", "All of the above"], "answer": "All of the above"}
];

// OTHER MCQ DATA (Combined into single array)
const otherMcqFinalData = [
  {
    "question": "Which module is used to access the knowledge bases available to you?",
    "options": ["Knowledge > Home", "Self Service > Knowledge", "Knowledge > All", "Knowledge > Knowledge Bases"],
    "answer": "Self Service > Knowledge"
  },
  {
    "question": "Which of the following is NOT a Flow Designer feature?",
    "options": ["Run a flow from a Catalog item", "Call a flow from another flow or subflow", "Test a flow using the 'Run as' feature", "Use Delegated Developer"],
    "answer": "Test a flow using the 'Run as' feature"
  },
  {
    "question": "What is the purpose of the coalesce field when importing data?",
    "options": ["If a match is not found, the existing record is updated", "To determine if a record matches an existing record or is a new record", "To identify and merge duplicate records", "When a match is found, a new record is inserted"],
    "answer": "To determine if a record matches an existing record or is a new record"
  },
  {
    "question": "Which module would you use to customize your instance banner image, text, and colors?",
    "options": ["System UI > UI Pages > Branding", "Service Portal > Portals > Branding", "System Properties > Basic Configuration UI16", "System Properties > Branding"],
    "answer": "System Properties > Basic Configuration UI16"
  },
  {
    "question": "Which one of the following returns true if the currently logged-in user has the admin role (server-side)?",
    "options": ["g_form.hasRoleExactly('admin')", "gs.hasRole('admin')", "g_form.hasRole('admin')", "gs.hasRoleExactly('admin')"],
    "answer": "gs.hasRole('admin')"
  },
  {
    "question": "What is true about homepages on mobile?",
    "options": ["Same as desktop homepages without the delete option", "There are no homepage on mobile", "Same as desktop homepages in every way", "Same as desktop homepages with delete option"],
    "answer": "There are no homepage on mobile"
  },
  {
    "question": "What does the Code Search feature do in Studio? (Choose 3)",
    "options": ["Searching in business rule", "Search from a list of applications", "Searching in all application", "Searching in your application"],
    "answer": ["Searching in business rule", "Searching in all application", "Searching in your application"]
  },
  {
    "question": "What are the two core base tables from which all other tables are extended?",
    "options": ["task and cmdb_model", "incident and cmdb ci", "task and cmdb", "incident and cmdb_rel_ci"],
    "answer": "task and cmdb"
  },
  {
    "question": "Which one of the following is NOT a GlideUser method?",
    "options": ["getFullName()", "username()", "hasRoleExactly()", "hasRole()"],
    "answer": "username()"
  },
  {
    "question": "How are flow variables accessed in Flow Designer?",
    "options": ["Data pills", "Newly generated icons", "Scratchpad variables", "New tabs"],
    "answer": "Data pills"
  },
  {
    "question": "Which of the following would NOT be a good fit for an application on ServiceNow?",
    "options": ["Facilities Management application", "Virtual Reality Gaming application", "A meeting room scheduling application", "Billing Cost Management application"],
    "answer": "Virtual Reality Gaming application"
  },
  {
    "question": "When creating an application via Guided Application Creator, which are NOT user experience options? (Choose 2)",
    "options": ["Portal", "Workplace", "Mobile", "Classic"],
    "answer": ["Portal", "Workplace"]
  },
  {
    "question": "Which of the following is NOT a report type in ServiceNow?",
    "options": ["Trend", "Line", "List", "Chart"],
    "answer": "Chart"
  },
  {
    "question": "Which scripts do NOT always run on the server side?",
    "options": ["Script Includes", "Business Rules", "UI Action", "Script Action"],
    "answer": "UI Action"
  },
  {
    "question": "What are the UX options available in Guided Application Creator? (Choose 2)",
    "options": ["Classic", "Desktop", "Tablet", "Workspace", "Mobile"],
    "answer": ["Classic", "Mobile"]
  },
  {
    "question": "Which one best describes what a Flow is?",
    "options": ["A sequence of actions to automate processes on the platform", "A script that defines the steps to automate processes on the platform", "A sequence of steps to automate processes on the platform", "A sequence of activities to automate processes on the platform"],
    "answer": "A sequence of actions to automate processes on the platform"
  },
  {
    "question": "Which method is used to emulate mobile for testing?",
    "options": ["$m.do", "$t.do", "?m.do", "$tablet.do"],
    "answer": "?m.do"
  },
  {
    "question": "Which role is required to access Guided Application Creator?",
    "options": ["sn_developer.app_creator", "sn_app_creator.app_creator", "sn_gac.app_creator", "sn_g_app_creator.app_creator"],
    "answer": "sn_g_app_creator.app_creator"
  },
  {
    "question": "Which of the following statements must evaluate to true to grant access to a table record?",
    "options": ["a, b, c", "a and c", "a and b", "a, b, c and d"],
    "answer": "a, b, c"
  },
  {
    "question": "Which option in Table Configuration allows a table to be extended?",
    "options": ["Extended By", "Extends", "Extensible", "Can be extended"],
    "answer": "Extensible"
  },
  {
    "question": "What is NOT true about email notifications?",
    "options": ["What", "When", "Who", "How"],
    "answer": "How"
  },
  {
    "question": "Which API translates text into multiple languages?",
    "options": ["Dynamic Translation", "Genius Translation", "Dynamic Result Answer", "Genius Result Answer"],
    "answer": "Dynamic Translation"
  },
  {
    "question": "How is access to Application menus and modules controlled?",
    "options": ["Client Scripts", "Roles", "Application Rules", "Access controls"],
    "answer": "Roles"
  },
  {
    "question": "How can developers specify which page opens after Record Producer submission?",
    "options": ["Create an application property to store the URL", "Configure the page in the Module that opens the Record Producer UI", "Write an after Business Rule script for the Record Producer's table: window.redirect", "Write a script in the Record Producer's Script field: producer.redirect="],
    "answer": "Write a script in the Record Producer's Script field: producer.redirect="
  },
  {
    "question": "What are the ways to designate data tables in Guided Application Creator? (Choose 3)",
    "options": ["Upload an existing PDF", "Create a new table on the platform", "Use a freeform database", "Upload an existing spreadsheet", "Use an existing table on the platform", "Upload an existing word processing document"],
    "answer": ["Create a new table on the platform", "Upload an existing spreadsheet", "Use an existing table on the platform"]
  }
];

// UDEMY DUMPS DATA (17 Questions)
const udemyData = [
  { "question": "Which objects can be used in Inbound Action scripts?", "options": ["Event", "Producer", "Email", "Current", "Previous"], "answer": ["Event", "Email", "Current"] },
  { "question": "What are some of the benefits of extending an existing table such as the Task table when creating a new application?", "options": ["You can repurpose existing fields by simply changing the label.", "Use existing fields with no modifications.", "Existing logic from the parent table will be automatically applied to the new table.", "All of the parent table records are copied to the new table."], "answer": ["You can repurpose existing fields by simply changing the label.", "Use existing fields with no modifications.", "Existing logic from the parent table will be automatically applied to the new table."] },
  { "question": "Which of the following statements is true for the Form Designer? (Choose three.)", "options": ["To add a field to the form layout, drag the field from the Fields tab to the desired destination on the form.", "To remove a field from the form layout, hover over the field to enable the Action buttons, and select the Delete (X) button.", "To add a section to the form layout, drag it from the Field Types tab to the desired destination on the form.", "To create a new field on a form's table, drag the appropriate data type from the Field Types tab to the form and then configure the new field."], "answer": ["To add a field to the form layout, drag the field from the Fields tab to the desired destination on the form.", "To remove a field from the form layout, hover over the field to enable the Action buttons, and select the Delete (X) button.", "To create a new field on a form's table, drag the appropriate data type from the Field Types tab to the form and then configure the new field."] },
  { "question": "Which of the following features are available to Global applications? (Choose three.)", "options": ["Automated Test Framework", "Delegated Development", "Source Control", "Flow Designer"], "answer": ["Automated Test Framework", "Source Control", "Flow Designer"] },
  { "question": "Which of the following statements is true for managing applications purchased from the Store?", "options": ["Applications that belong to other organizations can be changed", "Applications that belong to other organizations can be customized", "Customizations cannot revert back to the base system application", "There are separate entitlements for application-customizations"], "answer": "Customizations cannot revert back to the base system application" },
  { "question": "Which of the following variables are NOT available in all Business Rules? (Select All That Apply)", "options": ["current", "previous", "GlideSystem", "g_scratchpad"], "answer": ["previous", "g_scratchpad"] },
  { "question": "Which of the following accurately describes the features of a Record Producer in ServiceNow? (Choose two.)", "options": ["A Record Producer always inserts records into the sc_req_item table by default", "Field behavior on the Record Producer form can be controlled using Catalog Client Scripts", "Record Producers expose the full schema of the target table to the end user", "Descriptive prompts can be configured to guide users instead of showing technical field labels"], "answer": ["Field behavior on the Record Producer form can be controlled using Catalog Client Scripts", "Descriptive prompts can be configured to guide users instead of showing technical field labels"] },
  { "question": "For Application Access there is a configuration option called Allow access to this table via web services. Which one of the following statements is true when this option is selected?", "options": ["This option restricts the ability to delete records via web services but records can always be read", "Even when not selected, users with the correct permissions can use web services to access the table's records", "This option restricts access only to SOAP web services but does not apply to REST", "The user performing the query via web services must have the correct permissions to access the table's records"], "answer": "The user performing the query via web services must have the correct permissions to access the table's records" },
  { "question": "Which ServiceNow utility provides a graphical view of table relationships?", "options": ["Schema Map", "Dependency View", "Business Service Map", "CI Map"], "answer": "Schema Map" },
  { "question": "What is the primary purpose of the Application Picker?", "options": ["Select an application to run", "Select an application as a favorite", "Choose an application to edit and set the Application Scope", "Choose an application to download"], "answer": "Choose an application to edit and set the Application Scope" },
  { "question": "Which method is used to check if a user has a specific role in a Client Script?", "options": ["g_user.hasRole()", "gs.hasRole()", "g_form.hasRole()", "current.hasRole()"], "answer": "g_user.hasRole()" },
  { "question": "When configuring an Email Notification, what can trigger the notification? (Choose two.)", "options": ["Record insertion or update", "Event generation", "User login", "Scheduled job completion"], "answer": ["Record insertion or update", "Event generation"] },
  { "question": "Which component in Flow Designer is used to ask for approval?", "options": ["Action", "Trigger", "Flow Logic", "Subflow"], "answer": "Action" },
  { "question": "What is the function of the 'Display' Business Rule?", "options": ["Runs before the form is loaded to pass server-side data to the client", "Runs after the form is submitted", "Runs asynchronously to update related records", "Runs when a record is deleted"], "answer": "Runs before the form is loaded to pass server-side data to the client" },
  { "question": "Which of the following is true about Scoped Applications?", "options": ["They effectively sandboxed and do not affect the global scope by default", "They have full access to global scope scripts without restriction", "They cannot use Flow Designer", "They must be deployed via Update Sets only"], "answer": "They effectively sandboxed and do not affect the global scope by default" },
  { "question": "What is the default protection policy for a Script Include in a scoped application?", "options": ["Read-only", "Protected", "None", "Public"], "answer": "None" },
  { "question": "Which API is used to perform server-side database operations in a scoped application?", "options": ["GlideRecord", "GlideSystem", "GlideAggregate", "All of the above"], "answer": "All of the above" }
];

// ================= LOGIC SECTION =================

let currentQuizData = [];
let currentQuestionIndex = 0;
let score = 0;
let userAnswers = {};
let timerInterval;
let quizReviewMode = false;
let bookmarkedQuestions = [];
let incorrectQuestions = [];

// Load bookmarks from local storage
if(localStorage.getItem('sn_bookmarks')) {
    bookmarkedQuestions = JSON.parse(localStorage.getItem('sn_bookmarks'));
}

function resetQuestionState(questions) {
    questions.forEach(q => {
        q.locked = false;
    });
}

function startQuiz(testId) {
    // Select data
    if(testId === 'mock1') currentQuizData = [...mock1Data];
    else if(testId === 'mock2') currentQuizData = [...mock2Data];
    else if(testId === 'mock3') currentQuizData = [...mock3Data];
    else if(testId === 'other') currentQuizData = [...otherMcqFinalData];
    else if(testId === 'udemy') currentQuizData = [...udemyData];
    
    // Explicitly reset locked state for all selected questions
    resetQuestionState(currentQuizData);

    // Randomize options if checked
    const jumble = document.getElementById('jumble-check').checked;
    if (jumble) {
        // Randomize question order for mocks
        if(testId.startsWith('mock') || testId === 'other' || testId === 'udemy') {
            currentQuizData = currentQuizData.sort(() => Math.random() - 0.5);
        }
        // Randomize options
        currentQuizData.forEach(q => {
            q.options = q.options.sort(() => Math.random() - 0.5);
        });
    }

    // Reset State
    currentQuestionIndex = 0;
    score = 0;
    userAnswers = {};
    quizReviewMode = false;
    incorrectQuestions = [];

    // Switch View
    document.getElementById('dashboard-view').classList.add('hidden');
    document.getElementById('quiz-view').classList.remove('hidden');
    document.getElementById('study-view').classList.add('hidden');
    document.getElementById('results-modal').classList.add('hidden');

    // Init Progress & Timer
    updateProgressBar();
    startTimer(45 * 60); // 45 minutes

    loadQuestion();
}

function startRetakeIncorrect() {
    if (incorrectQuestions.length === 0) return;
    
    currentQuizData = [...incorrectQuestions];
    
    // CRITICAL FIX: Reset locked state for retake
    resetQuestionState(currentQuizData);
    
    // Randomize options again
    currentQuizData.forEach(q => {
        q.options = q.options.sort(() => Math.random() - 0.5);
    });

    // Reset State
    currentQuestionIndex = 0;
    score = 0;
    userAnswers = {};
    quizReviewMode = false;
    incorrectQuestions = []; // Reset this to capture NEW mistakes

    document.getElementById('results-modal').classList.add('hidden');
    
    // Init Progress & Timer
    updateProgressBar();
    startTimer(45 * 60); 

    loadQuestion();
}

function startTimer(duration) {
    clearInterval(timerInterval);
    let timer = duration, minutes, seconds;
    const display = document.getElementById('timer-display');
    
    timerInterval = setInterval(function () {
        minutes = parseInt(timer / 60, 10);
        seconds = parseInt(timer % 60, 10);

        minutes = minutes < 10 ? "0" + minutes : minutes;
        seconds = seconds < 10 ? "0" + seconds : seconds;

        if(display) display.textContent = minutes + ":" + seconds;

        if (--timer < 0) {
            clearInterval(timerInterval);
            finishQuiz();
        }
    }, 1000);
}

// STUDY MODE LOGIC
function startMockStudyMode() {
    setupStudyMode([ ...mock1Data, ...mock2Data, ...mock3Data ], "Mock Tests Study");
}

function startOtherStudyMode() {
    setupStudyMode([ ...otherMcqFinalData, ...udemyData ], "Other Resources Study");
}

function setupStudyMode(data, titleText) {
    document.getElementById('dashboard-view').classList.add('hidden');
    document.getElementById('quiz-view').classList.add('hidden');
    document.getElementById('study-view').classList.remove('hidden');

    const container = document.getElementById('study-content');
    container.innerHTML = '';
    
    data.forEach((q, index) => {
        const qBlock = document.createElement('div');
        qBlock.className = 'study-question-block';
        qBlock.setAttribute('data-question-text', q.question.toLowerCase());

        const title = document.createElement('h3');
        title.className = 'study-question-title';
        title.innerHTML = `Q${index + 1}. ${q.question}`;

        if(Array.isArray(q.answer)) {
            title.innerHTML += `<br><span style="font-size:0.8em; color:var(--brand-green);">(Select all that apply)</span>`;
        }

        qBlock.appendChild(title);

        const correctAnswers = Array.isArray(q.answer) ? q.answer : [q.answer];

        q.options.forEach(opt => {
            const optDiv = document.createElement('div');
            optDiv.className = 'study-option';
            optDiv.innerText = opt;

            if (correctAnswers.includes(opt)) {
                optDiv.classList.add('correct-answer');
                optDiv.innerHTML = `‚úÖ ${opt}`;
            }

            qBlock.appendChild(optDiv);
        });

        container.appendChild(qBlock);
    });
}

function filterStudyQuestions() {
    const input = document.getElementById('study-search');
    const filter = input.value.toLowerCase();
    const questions = document.getElementsByClassName('study-question-block');

    for (let i = 0; i < questions.length; i++) {
        const txtValue = questions[i].getAttribute('data-question-text');
        if (txtValue.indexOf(filter) > -1) {
            questions[i].style.display = "";
        } else {
            questions[i].style.display = "none";
        }
    }
}

// KEYBOARD SHORTCUTS
document.addEventListener('keydown', (e) => {
    if (document.getElementById('quiz-view').classList.contains('hidden')) return;
    
    const key = e.key;
    if (key === 'ArrowRight') {
        const nextBtn = document.querySelector('.nav-btn.primary.next');
        if(nextBtn) nextBtn.click();
    } else if (key === 'ArrowLeft') {
        const prevBtn = document.querySelector('.nav-btn.prev');
        if(prevBtn && !prevBtn.disabled) prevBtn.click();
    } else if (key === 'Enter') {
        const submitBtn = document.getElementById('submit-btn');
        if (submitBtn && submitBtn.style.display !== 'none') submitBtn.click();
    } else if (['1','2','3','4'].includes(key)) {
        const index = parseInt(key) - 1;
        const options = document.querySelectorAll('.option-item');
        if (options[index]) options[index].click();
    }
});

function loadQuestion() {
    const q = currentQuizData[currentQuestionIndex];
    const isMultiSelect = Array.isArray(q.answer);

    // Update Header
    const qProgress = document.getElementById('q-progress');
    if(qProgress) qProgress.innerText = `Q ${currentQuestionIndex + 1}/${currentQuizData.length}`;
    
    const scoreDisplay = document.getElementById('score-display');
    if(scoreDisplay) {
        if (!quizReviewMode) {
            scoreDisplay.innerText = `Score: ${score} / ${currentQuizData.length}`;
        } else {
            scoreDisplay.innerText = "Review Mode";
        }
    }

    // Update Progress Bar
    updateProgressBar();

    // Update Bookmark Icon
    const bookmarkBtn = document.getElementById('bookmark-btn');
    if (bookmarkBtn) {
        if (bookmarkedQuestions.includes(q.question)) {
            bookmarkBtn.classList.add('bookmarked');
            bookmarkBtn.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"></path></svg>'; 
        } else {
            bookmarkBtn.classList.remove('bookmarked');
            bookmarkBtn.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"></path></svg>';
        }
    }

    // Set Question Text
    let qText = q.question.replace(/\n/g, '<br>');
    if (isMultiSelect) qText += " <br><small style='color:var(--brand-green); font-size: 0.85em; margin-top:5px; display:block;'>(Select all that apply)</small>";
    
    const qTextEl = document.getElementById('question-text');
    if(qTextEl) qTextEl.innerHTML = qText;

    // Render Options
    const optionsDiv = document.getElementById('options-container');
    if(optionsDiv) {
        optionsDiv.innerHTML = '';

        // Initialize User Answer Store if new
        if (!userAnswers[currentQuestionIndex]) {
            userAnswers[currentQuestionIndex] = isMultiSelect ? [] : null;
        }

        q.options.forEach((opt, idx) => {
            const btn = document.createElement('div');
            btn.className = 'option-item';
            // Added keyboard hint
            btn.innerHTML = `<span>${opt}</span> <span class="key-hint">${idx+1}</span>`;
            
            // If reviewing, disable interaction and show correct/wrong
            if (quizReviewMode) {
                btn.style.pointerEvents = 'none';
                const userSelected = userAnswers[currentQuestionIndex];
                const correctArr = Array.isArray(q.answer) ? q.answer : [q.answer];
                
                // Highlight Correct Answers
                if (correctArr.includes(opt)) {
                    btn.classList.add('correct');
                }
                
                // Highlight Wrong Selections
                if (isMultiSelect) {
                    if (userSelected && userSelected.includes(opt) && !correctArr.includes(opt)) {
                        btn.classList.add('wrong');
                    }
                } else {
                    if (userSelected === opt && !correctArr.includes(opt)) {
                        btn.classList.add('wrong');
                    }
                }
            } else {
                // Normal Quiz Mode Logic
                btn.onclick = () => handleOptionClick(btn, opt, q.answer, isMultiSelect);
                
                const savedAns = userAnswers[currentQuestionIndex];
                if (q.locked) {
                    btn.style.pointerEvents = 'none';
                    if (isMultiSelect) {
                        if (q.answer.includes(opt)) btn.classList.add('correct');
                        if (savedAns && savedAns.includes(opt) && !q.answer.includes(opt)) btn.classList.add('wrong');
                    } else {
                        if (opt === q.answer) btn.classList.add('correct');
                        if (savedAns === opt && opt !== q.answer) btn.classList.add('wrong');
                    }
                } else if (isMultiSelect && savedAns && savedAns.includes(opt)) {
                    btn.classList.add('selected');
                }
            }

            optionsDiv.appendChild(btn);
        });
    }

    // Handle Submit Button
    const subBtn = document.getElementById('submit-btn');
    if(subBtn) {
        if (quizReviewMode) {
            subBtn.style.display = 'none';
        } else {
            subBtn.style.display = (isMultiSelect && !q.locked) ? 'block' : 'none';
        }
    }

    // Update Nav Buttons
    const prevBtn = document.querySelector('.prev');
    if(prevBtn) prevBtn.disabled = currentQuestionIndex === 0;
    
    const nextBtn = document.querySelector('.next');
    if(nextBtn) {
        if (currentQuestionIndex === currentQuizData.length - 1) {
            nextBtn.innerText = quizReviewMode ? "Finish Review" : "Finish Quiz";
        } else {
            nextBtn.innerText = "Next";
        }
    }
}

function updateProgressBar() {
    const progress = ((currentQuestionIndex + 1) / currentQuizData.length) * 100;
    const bar = document.getElementById('progress-bar');
    if(bar) bar.style.width = `${progress}%`;
}

function toggleBookmark() {
    const q = currentQuizData[currentQuestionIndex];
    if (bookmarkedQuestions.includes(q.question)) {
        bookmarkedQuestions = bookmarkedQuestions.filter(bq => bq !== q.question);
    } else {
        bookmarkedQuestions.push(q.question);
    }
    localStorage.setItem('sn_bookmarks', JSON.stringify(bookmarkedQuestions));
    loadQuestion(); // refresh icon
}

function handleOptionClick(elem, selectedOpt, correctAns, isMulti) {
    const q = currentQuizData[currentQuestionIndex];
    if (q.locked) return;

    if (isMulti) {
        let current = userAnswers[currentQuestionIndex] || [];
        if (current.includes(selectedOpt)) {
            current = current.filter(x => x !== selectedOpt);
            elem.classList.remove('selected');
        } else {
            current.push(selectedOpt);
            elem.classList.add('selected');
        }
        userAnswers[currentQuestionIndex] = current;
    } else {
        userAnswers[currentQuestionIndex] = selectedOpt;
        q.locked = true;

        const allOpts = document.querySelectorAll('.option-item');
        if (selectedOpt === correctAns) {
            score++;
            elem.classList.add('correct');
        } else {
            elem.classList.add('wrong');
            // Track wrong answer for retake
            if (!incorrectQuestions.some(iq => iq.question === q.question)) {
                incorrectQuestions.push(q);
            }
            
            allOpts.forEach(o => {
                // Check innerText to ignore key hint
                if (o.innerText.replace(/[0-9]$/, '').trim() === correctAns) o.classList.add('correct');
                // Fallback for simple match
                if (o.innerText.includes(correctAns)) o.classList.add('correct');
            });
        }
        const scoreDisplay = document.getElementById('score-display');
        if(scoreDisplay) scoreDisplay.innerText = `Score: ${score} / ${currentQuizData.length}`;
        allOpts.forEach(o => o.style.pointerEvents = 'none');
    }
}

function submitMultiAnswer() {
    const q = currentQuizData[currentQuestionIndex];
    const userAns = userAnswers[currentQuestionIndex];
    const correctAns = q.answer;

    q.locked = true;

    const sortedUser = [...userAns].sort();
    const sortedCorrect = [...correctAns].sort();
    const isCorrect = JSON.stringify(sortedUser) === JSON.stringify(sortedCorrect);

    if (isCorrect) {
        score++;
    } else {
        // Track wrong answer for retake
        if (!incorrectQuestions.some(iq => iq.question === q.question)) {
            incorrectQuestions.push(q);
        }
    }

    const scoreDisplay = document.getElementById('score-display');
    if(scoreDisplay) scoreDisplay.innerText = `Score: ${score} / ${currentQuizData.length}`;
    loadQuestion(); 
}

function nextQuestion() {
    if (currentQuestionIndex < currentQuizData.length - 1) {
        currentQuestionIndex++;
        loadQuestion();
    } else {
        if (quizReviewMode) {
            location.reload();
        } else {
            finishQuiz();
        }
    }
}

function prevQuestion() {
    if (currentQuestionIndex > 0) {
        currentQuestionIndex--;
        loadQuestion();
    }
}

// --- NAVIGATOR MODAL LOGIC ---
function openNavModal() {
    const grid = document.getElementById('nav-grid-content');
    grid.innerHTML = '';
    
    currentQuizData.forEach((q, idx) => {
        const item = document.createElement('div');
        item.className = 'nav-item';
        item.innerText = idx + 1;
        
        if (idx === currentQuestionIndex) item.classList.add('current');
        if (userAnswers[idx]) item.classList.add('answered');
        if (bookmarkedQuestions.includes(q.question)) item.classList.add('bookmarked');
        
        // If in review mode, show right/wrong
        if (quizReviewMode) {
            const isMulti = Array.isArray(q.answer);
            const userAns = userAnswers[idx];
            let isCorrect = false;
            
            if (userAns) {
                if (isMulti) {
                    const sortedUser = [...userAns].sort();
                    const sortedCorrect = [...q.answer].sort();
                    isCorrect = JSON.stringify(sortedUser) === JSON.stringify(sortedCorrect);
                } else {
                    isCorrect = userAns === q.answer;
                }
            }
            
            if(isCorrect) item.classList.add('review-correct');
            else item.classList.add('review-wrong');
        }

        item.onclick = () => {
            currentQuestionIndex = idx;
            loadQuestion();
            closeNavModal();
        };
        grid.appendChild(item);
    });
    
    document.getElementById('nav-modal').classList.remove('hidden');
}

function closeNavModal() {
    document.getElementById('nav-modal').classList.add('hidden');
}

// --- CONFETTI LOGIC ---
function triggerConfetti() {
    const canvas = document.getElementById('confetti-canvas');
    const ctx = canvas.getContext('2d');
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
    
    const confetti = [];
    const colors = ['#81B5A1', '#2ecc71', '#3498db', '#f1c40f', '#e74c3c'];
    
    for (let i = 0; i < 200; i++) {
        confetti.push({
            x: Math.random() * canvas.width,
            y: Math.random() * canvas.height - canvas.height,
            color: colors[Math.floor(Math.random() * colors.length)],
            size: Math.random() * 5 + 5,
            speedY: Math.random() * 3 + 2,
            speedX: Math.random() * 2 - 1
        });
    }
    
    function animate() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        confetti.forEach((p, i) => {
            p.y += p.speedY;
            p.x += p.speedX;
            if (p.y > canvas.height) p.y = -10;
            ctx.fillStyle = p.color;
            ctx.fillRect(p.x, p.y, p.size, p.size);
        });
        requestAnimationFrame(animate);
    }
    animate();
    
    // Stop after 5 seconds
    setTimeout(() => {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
    }, 5000);
}

function finishQuiz() {
    clearInterval(timerInterval);
    const modal = document.getElementById('results-modal');
    const finalScore = document.getElementById('final-score');
    const finalMsg = document.getElementById('final-msg');
    const retakeBtn = document.getElementById('retake-incorrect-btn');
    
    const percentage = Math.round((score / currentQuizData.length) * 100);
    finalScore.innerText = `${percentage}%`;
    
    if(percentage >= 90) {
        finalMsg.innerText = "Outstanding! You're ready!";
        triggerConfetti();
    }
    else if(percentage >= 70) {
        finalMsg.innerText = "Good job, but keep practicing.";
        triggerConfetti();
    }
    else {
        finalMsg.innerText = "Keep studying, you can do this!";
    }
    
    if (incorrectQuestions.length > 0) {
        retakeBtn.style.display = 'block';
    } else {
        retakeBtn.style.display = 'none';
    }
    
    modal.classList.remove('hidden');
}

function closeResultsModal() {
    document.getElementById('results-modal').classList.add('hidden');
    quizReviewMode = true;
    currentQuestionIndex = 0;
    loadQuestion();
}

</script>
</body>
</html>
